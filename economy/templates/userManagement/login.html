{% extends "publicNav.html" %}
{% block title %}<title>用户登录</title>{% endblock %}
{% block my_css %}
    <!-- <link rel="stylesheet" href="/static/css/modalANDtable.css"> -->
    <!-- <link rel="stylesheet" href="/static/css/homePage.css"> -->
<style>
    #nav .nav_middle .main_li:nth-of-type(1) {
        -webkit-transform: scale(1.3);
        -moz-transform: scale(1.3);
        -ms-transform: scale(1.3);
        -o-transform: scale(1.3);
        transform: scale(1.3);
    }
    #nav .nav_middle .main_li:nth-of-type(1) a {
        color:#ff9645;
    }
    .fourPic {
        width: 30px;
        height: 30px;
    }

    /* lvlei 2018 */
    * {margin: 0;padding: 0;}
    #container {
        /* 垂直塌陷 */
        overflow:hidden;
        position: relative;
        z-index: 999;
        width: 100%;
        /*background: url("../images/bodyPic.png") no-repeat rgba(19, 18, 18, 0.67);*/
        background:rgb(4, 19, 38);
    }
    #container #box {
        position: relative;
        z-index: 200;
        margin:0 auto;
        width:30%;
        /* height: 300px; */
        padding:20px;
        border-radius: 10px;
        /* background-color: rgba(21, 21, 21, 0.56); */
        background-color: #144e63;
        margin-top:15%;
    }
    #container #box h2 {
        color:#fff;
    }

    /* 记住密码框 */
    .demo-label{display:inline-block;cursor: pointer;color:#fff;}
    .demo-radio{display:none;}
    .demo-radioInput{cursor:pointer;background-color:#eee;display:inline-block;height:16px;vertical-align:middle;width:16px;line-height:1;margin-right: 5px;}
    .demo-radio:checked + .demo-radioInput:after{background-color:#57ad68;content:"";display:inline-block;height:12px;margin:2px;width:12px;}
    .demo-checkbox.demo-radioInput,.demo-radio:checked + .demo-checkbox.demo-radioInput:after{border-radius:0;}

    /* 账号密码输入框 */
    #username,#password {
        /* width: 200px; */
        width: 80%;
        height: 25px;
        padding: 5px 5px 5px 10px;
        border-radius: 10px;
        margin-bottom: 5px;
        font-size: 12px;
        background: transparent;
        border: 1px solid white;
        transition: all linear .7s;
        color: white;
    }
    .title {
        display:inline-block;
        float: left;
        line-height: 25px;
        width: 60px;
        font-size: 14px;
        color:#fff;
    }
    .login-box {
        /* padding:20px 0 0 50px; */
        padding:0 0 0 50px;
    }
    .login-box p {
        padding-right:10%;
        margin:10px;
    }
    .login-box p label {
        vertical-align:middle;
        width:18%;
    }
    /* 跳转注册a标签 */
    #form a#register{
        color:#fff;
        float: right;
    }
    #form a#register:hover {
        color:#ff9645;
        font-weight:700;
    }
    /* 提交按钮 */
    #submit {
        text-align: center;
        background: transparent;
        color: rgb(255, 255, 255);
        font-size: 14px;
        /*text-shadow: rgb(173, 60, 37) 1px 1px 1px;*/
        width: 100%;
        height: 32px;
        border: 1px solid #fff;
        border-radius: 5px;
        font-weight: bold;
        cursor: pointer;
        transition: all linear .5s;
    }
    #submit:hover {
        background: #fff;
        color: black;
    }
    /* lvlei 2018 */
</style>
{% endblock %}

{% block main %}
<div id="container">
    <div id="box">
        <h2 >用户登录</h2>
        <hr />
        <div class="login-box">
            <!-- 提示信息 -->
            <p class="hint-information clearfix" style="display:none;">
                <span style="color:#fff;text-align:center;width:80%;display:inline-block;"></span><i class="icon-asterisk" style="color:red;vertical-align:middle;"></i>
            </p>
            <!-- 表单 -->
            <form id="form" action="/userManagement/login" method="post" name="login_user_form" accept-charset="utf-8">
                <p>
                    <label for="username">
                        <span class="title">用户名</span>
                    </label>
                    <input id="username" type="text" name="username" value="" placeholder="请输入您的账号">
                </p>
                <p>
                    <label for="password">
                        <span class="title">密码</span>
                    </label>
                    <input id="password" type="password" name="password" value="" placeholder="请输入您的密码">
                </p>
                <p style="margin-bottom:20px;" class="remember clearfix">
                    <label for="remember" class="demo-label" style="margin:0;width:auto;">
                        <input id="remember" type="checkbox" value="y" class="demo-radio"/>
                        <span class="demo-checkbox demo-radioInput"></span><span style="display:inline-block;">记住密码</span>
                    </label>
                    <span class="clearfix" style="float:right;">
                        <!-- <a id="register" href="javascript:void(0);" style="color:#fff;float:right;">注册</a> -->
                        <a id="register" href="/userManagement/register">注册</a>
                    </span>
                </p>
                <p>
                    <input type="submit" id="submit" name="submit" value="登                 录" />
                </p>
            </form>

        </div>
    </div>

</div>

{% endblock %}

{% block my_js %}

<!-- <script src="/static/js/echarts-2/build/dist/echarts.js"></script> -->
<!-- <script src="/static/js/homePage-1.js"></script> -->
<script>
    $('#container').height($(window).height());
    $('#nav').hide();



    $('#username').blur(function(){
        if($('#username').val() == ''){
            $('.hint-information').show();
            $('.hint-information span').text('用户名不得为空！');
            return false;
        }
    })
    $('#username').focus(function(){
        $('.hint-information').hide();
    })
    $('#password').blur(function(){
        if($('#password').val() == ''){
            $('.hint-information').show();
            $('.hint-information span').text('密码不得为空！');
            return false;
        }
    })
    $('#password').focus(function(){
        $('.hint-information').hide();
    })

    /*
        $('.remember').on('click','#register',function(){
            document.title='用户注册';
            $('#box h2').text('用户注册');
            $('.remember label').hide();
            $('.remember>span').empty().append('<a id="login" href="javascript:void(0);" style="color:#fff;float:right;">已有账号登录</a>');
            $('#box #submit').val('注                 册');
            $('#form').attr('action','/userManagement/register');
        },)
        $('.remember').on('click','#login',function(){
            document.title='用户登录';
            $('#box h2').text('用户登录');
            $('.remember label').show();
            $('.remember>span').empty().append('<a id="register" href="javascript:void(0);" style="color:#fff;float:right;">注册</a>');
            $('#box #submit').val('登                 录');
            $('#form').attr('action','/userManagement/login');
        })
    */
    // =======记住密码======
    //设置cookie
    function setCookie(name,value,day){
        var date = new Date();
        date.setDate(date.getDate() + day);
        document.cookie = name + '=' + value + ';expires='+ date;
    };
    //获取cookie
    function getCookie(name){
        var reg = RegExp(name+'=([^;]+)');
        var arr = document.cookie.match(reg);
        if(arr){
            return arr[1];
        }else{
            return '';
        }
    };
    //删除cookie
    function delCookie(name){
        setCookie(name,null,-1);
    };
    $(document).ready(function(){

        var error = '{{error}}';
        console.log(error);
        if(error){
            $('.hint-information').show();
            $('.hint-information span').text(error);
        }

        // var oForm = document.getElementById('form');
        var oUser = document.getElementById('username');
        var oPswd = document.getElementById('password');
        var oRemember = document.getElementById('remember');
        //页面初始化时，如果帐号密码cookie存在则填充
        if(getCookie('user') && getCookie('pswd')){
            oUser.value = getCookie('user');
            oPswd.value = getCookie('pswd');
            oRemember.checked = true;
        }
        //复选框勾选状态发生改变时，如果未勾选则清除cookie
        oRemember.onchange = function(){
            if(!this.checked){
                delCookie('user');
                delCookie('pswd');
            }
        };
        //表单提交事件触发时，如果复选框是勾选状态则保存cookie
        $('#form').submit(function(){

            if($('#username').val() == ''){
                $('.hint-information').show();
                $('.hint-information span').text('用户名不得为空！');
                return false;
            }
            if($('#password').val() == ''){
                $('.hint-information').show();
                $('.hint-information span').text('用户名不得为空！');
                return false;
            }
            // 选中记住密码
            if(oRemember.checked){
                setCookie('user',oUser.value,7); //保存帐号到cookie，有效期7天
                setCookie('pswd',oPswd.value,7); //保存密码到cookie，有效期7天
            }
        })
    })
    // =======记住密码======


</script>
{% endblock %}
